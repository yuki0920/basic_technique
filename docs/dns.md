# DNS

## 参考
[DNSがよくわかる教科書](https://www.sbcr.jp/product/4797394481/)

## 基本用語
- レジストリは、インターネット全体で共通に使われる名前や番号を一元管理する組織
- レジストラはドメイン名登録者からの新生を取り次ぐ、1つのTLDに対してレジストリは1つだがレジストラは複数ある
- リセラはレジストラを介して登録したドメイン名を別の登録社に再販する事業者
- ドメインは、インターネット上で分割されたそれぞれの名前空間
- トップレベルドメイン(TLD)は、ドットつなぎのドメインの最右端で`example.jp`ならば`jp`となる
- ゾーンは委任によって管理を任された、ドメインを管理する範囲
- サイバースクワッティングは他人が権利を持つ商標などの文字列を含むドメインを先に登録し転売を図ろうとする行為
- iterative resolutionはルートから階層構造をたどり名前解決をする仕組み
- DNSの基本構成要素は、
  - スタブリゾルバーは名前解決要求をするAPI
  - フォワーダー(DNSプロキシ)はスタブリゾルバーとフルリゾルバーの中間に位置し、問い合わせと応答を中継する。ホームルーターはフォワーダーの役割を持つy
  - フルリゾルバーは名前解決の実行とキャッシュの保持をする
  - 権威サーバー(ネームサーバー)は、ドメイン名とIPアドレスの管理表をもつサーバーで、ゾーンの管理者が管理している。インターネットに公開するには、ネームサーバーへの登録が必須となる
- リソースレコードは権威サーバーがが保持するデータで、ドメイン名、IPアドレス、TTL(Time To Live)、クラス、タイプで構成される
- リソースレコード
  - SOA(Start Of Authority)レコード: ゾーンに関する基本的な情報
  - NS(Name Server)レコード: 委任に関する情報
  - Aレコード: ドメイン名に対するIPv4アドレス
  - AAAAレコード: ドメイン名に対するIPv6アドレス
  - MXレコード(Mail ExChange): メール配送に対する情報
  - CNAMEレコード: ドメイン名に対する正式名をもち、ホスト名に別名をつける手段として利用される
- ネガティブキャッシュは目的のリソースコードが存在しなかったという事実を保持するためのキャッシュ
- ゾーン転送は複数台の権威サーバー間でデータを転送するしくみ
- プライマリーサーバーはコピー元となる権威サーバーで、セカンダリーサーバーはコピー先となる権威サーバー
- プライマリーサーバーのホストは、管理対象のドメインが`example.jp`ならば、`ns1.example.jp`などになる
- 正引きはドメインからIPアドレスを検索することで、逆引きはIPアドレスからドメインを検索すること
- サブドメインは、権威サーバーによって作成され、別の権威サーバーに委任することによって管理される
- DNSキャッシュポイズニングは、フルリゾルバーのキャッシュ情報を意図的に書き換え、利用者を誤ったサイトへ誘導する攻撃のこと
- URLの`www`は有無によって違いはない
