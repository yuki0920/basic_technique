# データ

## レプリケーション
- シングルリーダーアプリケーションは、クライアントは全ての書き込みを1つのリーダーに送り、リーダーはデータ変更イベントのストリームを他のフォロワーに送信する
- マルチリーダーレプリケーションは、クライアントが複数あるリーダーノードのいずれかに送信し、リーダー軍はデータの変更ストリームをお互いとそしてフォロワーに送信する
- リーダーレスレプリケーションは、クライアントは書き込みを複数のノードに送信し、古いデータを持つノードを修正するために読み取りを複数のノードから並列に行う
- レプリケーションはラグが生じるため、アプリケーションの状況に応じて一貫性モデルを採用する
- read-after-write一貫性は、自分自身が投入したデータを常に見ることができる
- monotonic reads(単調な読み取り)は、ある時点のデータをユーザーが一度見たら、それ以前の時点のデータを見ることが出来ない
- consistent prefix reads(一貫性のあるプレフィックス読み取り)は、ユーザーは適切な因果関係を保持した状態でデータを見ることができる

## パーティショニング
- パーティショニングの目標は、データやクエリの負荷を複数のマシン間で均等に分配し、ホットスポットが生じないようにすることである。データに適したパーティショニングのスキームを選択肢、クラスタへのノードの追加や削除が生じた時にリバランシングする
- キーの範囲によるパーティショニングは、キーがソートされ1つのパーティションには最小値〜最大値の間にあるキーが保存される
- ハッシュパーティショニングは、ハッシュ関数がキーに対して適用され1つのパーティションにはハッシュの一定の範囲が保存される

## トランザクション
- ACIDは、Atomicity, Consistency, Isolation, Durabilityのこと
- Atomicityは、それ以上小さな部分に分割できないものを指す。システムがとりえる状態はその処理が始まる前と終わった後の状態だけであり、中間の状態にはならないこと
- Consistencyは、データについて常に真でなければならないルールを維持すること。このルールの概念はアプリケーションに依存している
- Isolationは、並行して実行されたトランザクションが互いから分離されていること
- Durabilityは、データを失わず保持し続けることで、HDDやSSDなどの不揮発性のストレージに書きこむこと
- Read Committedは、トランザクションの分離性の最も基本的なレベルであり書きを保証する。
  - データベースから読み取ったデータはコミットされたデータのみであること(ダーティーリートは生じない)
  - データベースへの書き込みは、上書きするのはコミットされたデータのみであること(ダーティーライトは生じない)
